{% extends 'recipes/base.html' %}

{% block content %}
{% if user.is_authenticated %}

<div class="post">
    {% if recipe.creation_time %}
    <div class="date">
        {{ recipe.creation_time }}
    </div>
    {% endif %}
    <div class="jumbotron">
        <a class="btn btn-default pull-right" href="{% url 'recipe_edit' pk=recipe.pk %}"><span
                class="glyphicon glyphicon-pencil"></span>Edit recipe</a>

        <h1>{{ recipe.description }}</h1>
        <img class="recipe-img pull-right" src="{{recipe.main_img}}" alt="image not found">

        <p>{{ recipe.name|linebreaksbr }}</p>
        <p> Cuisine: {{ recipe.cuisine|linebreaksbr }}</p>
        <p> Cooking time: {{ recipe.cooking_time|linebreaksbr }} hour(s) </p>
    </div>

    <div class="recipe">

        <div class="date">

        </div>
        <p><u>Steps for recipe:</u></p>
    </div>
    <hr>
    <table class="table table-condensed">

        <a class="btn btn-default pull-right" href="{% url 'step_new' pk_recipe=recipe.pk %}"><span
                class="glyphicon glyphicon-pencil"></span>Add step</a>
        <thead>
        <tr>
            <th>#</th>
            <th>description</th>
            <th>image</th>
        </tr>
        </thead>
        <tbody>
        {% for step in recipe.step_set.all %}
        <tr>
            <th>
                <p>{{ step.number|linebreaksbr }}</p>
            </td>
            </th>

            <td>
                {{ step.description }}
            </td>
            <td>
                <img class="recipe-img img-circle" src="{{step.img}}" alt="can not load image">
                <hr>
                <a class="btn btn-default pull-right" href="{% url 'step_edit' pk=step.pk %}"><span
                        class="glyphicon glyphicon-pencil"></span>Edit step</a>
                <a class="btn btn-default pull-right" href="{% url 'step_delete' pk=step.pk %}"><span
                        class="glyphicon glyphicon-pencil"></span>Delete step</a>
            </td>

        </tr>

        {% endfor %}
        </tbody>
    </table>
</div>
{% else %}
<h1><b class="text-muted">{{ "Welcome to Recipes! You have to LogIn or Register." }}</b></h1>
{% endif %}
{% endblock %}